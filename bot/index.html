<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CheckInBot Frontend</title>
</head>

<body>
    <p><img src="bot.png" alt="Bot Image" style="width: 33%; display: block; margin: auto; float: left;"><br></p>
    <label for="initials">Enter Manager Initials:</label>
    <input type="text" id="initials" placeholder="first and last initials" />
    <button onclick="runReport()">Request Report</button>
    <p>Status: <span id="statusField">Awaiting input...</span></p>

    <script>
        async function runReport() {
            const initials = document.getElementById('initials').value;
            const apiUrl = `https://nld15mix54.execute-api.us-west-2.amazonaws.com/bot?initials=${initials}`;
            document.getElementById('statusField').innerText = 'Sending...';

            try {
              let response = await fetch(apiUrl, {
                  method: 'GET',
                  headers: {
                      'Accept': 'text/plain'  // Expecting plain text response
                  }
              });

              if (!response.ok) {
                  document.getElementById('statusField').innerText = 'API error occurred.';
                  throw new Error(`HTTP error! Status: ${response.status}`);
              }

              const responseData = await response.text();
              document.getElementById('statusField').innerText = responseData;

          } catch (error) {
              console.error('There was a problem with the fetch operation:', error.message);
              document.getElementById('statusField').innerText = error;
          }
        }
    </script>
</body>

</html>
